<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic usage • cmhc</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Basic usage">
<meta property="og:description" content="cmhc">
<meta property="og:image" content="https://github.com/mountainMath/cmhc/raw/master/logo.png">
<meta property="og:image:alt" content="cmhc">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@vb_jens">
<meta name="twitter:site" content="https://mountainmath.github.io/cmhc/">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cmhc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic_usage.html">Basic usage</a>
    </li>
    <li>
      <a href="../articles/rental_universe.html">Rental Universe</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mountainMath/cmhc/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic usage</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mountainMath/cmhc/blob/HEAD/vignettes/basic_usage.Rmd" class="external-link"><code>vignettes/basic_usage.Rmd</code></a></small>
      <div class="hidden name"><code>basic_usage.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mountainMath/cmhc" class="external-link">cmhc</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>To list the CMHC tables available via the package we can call
<code>list_cmhc_tables</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_cmhc_tables.html">list_cmhc_tables</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="3%">
<col width="7%">
<col width="9%">
<col width="5%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th align="left">Survey</th>
<th align="left">Series</th>
<th align="left">Dimension</th>
<th align="left">Breakdown</th>
<th align="left">GeoFilter</th>
<th align="left">Filters</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Scss</td>
<td align="left">Starts</td>
<td align="left">Dwelling Type</td>
<td align="left">Provinces</td>
<td align="left">Default</td>
<td align="left">Homeowner , Rental , Condo , Co-op , All , Single ,
Semi-detached, Row , Apartment , All</td>
</tr>
<tr class="even">
<td align="left">Scss</td>
<td align="left">Starts</td>
<td align="left">Dwelling Type</td>
<td align="left">Centres</td>
<td align="left">Default</td>
<td align="left">Homeowner , Rental , Condo , Co-op , All , Single ,
Semi-detached, Row , Apartment , All</td>
</tr>
<tr class="odd">
<td align="left">Scss</td>
<td align="left">Starts</td>
<td align="left">Dwelling Type</td>
<td align="left">Survey Zones</td>
<td align="left">Default</td>
<td align="left">Homeowner , Rental , Condo , Co-op , All , Single ,
Semi-detached, Row , Apartment , All</td>
</tr>
<tr class="even">
<td align="left">Scss</td>
<td align="left">Starts</td>
<td align="left">Dwelling Type</td>
<td align="left">Census Subdivision</td>
<td align="left">Default</td>
<td align="left">Homeowner , Rental , Condo , Co-op , All , Single ,
Semi-detached, Row , Apartment , All</td>
</tr>
<tr class="odd">
<td align="left">Scss</td>
<td align="left">Starts</td>
<td align="left">Dwelling Type</td>
<td align="left">Neighbourhoods</td>
<td align="left">Default</td>
<td align="left">Homeowner , Rental , Condo , Co-op , All , Single ,
Semi-detached, Row , Apartment , All</td>
</tr>
<tr class="even">
<td align="left">Scss</td>
<td align="left">Starts</td>
<td align="left">Dwelling Type</td>
<td align="left">Census Tracts</td>
<td align="left">Default</td>
<td align="left">Homeowner , Rental , Condo , Co-op , All , Single ,
Semi-detached, Row , Apartment , All</td>
</tr>
</tbody>
</table>
<p>It lists all possible tables by survey, series, dimension and
breakdown, as well as the possible filters that can be applied. It is
often convenient to run the <code><a href="../reference/select_cmhc_table.html">select_cmhc_table()</a></code> interactive
query builder in the console to iteratively walk through building the
parameters for the <code><a href="../reference/get_cmhc.html">get_cmhc()</a></code> data query.</p>
<p>To access a time series for a region with census geographic
identifier <code>geo_uid</code> we use
<code>breakdown="Historical Time Periods"</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vacancy_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_cmhc.html">get_cmhc</a></span><span class="op">(</span>survey<span class="op">=</span><span class="st">"Rms"</span>,series<span class="op">=</span><span class="st">"Vacancy Rate"</span>,dimension<span class="op">=</span><span class="st">"Bedroom Type"</span>,</span>
<span>                         breakdown<span class="op">=</span><span class="st">"Historical Time Periods"</span>,  geo_uid<span class="op">=</span><span class="st">"3506008"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">vacancy_data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Date</span>,y<span class="op">=</span><span class="va">Value</span><span class="op">/</span><span class="fl">100</span>,colour<span class="op">=</span><span class="va">`Bedroom Type`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>shape<span class="op">=</span><span class="va">Quality</span><span class="op">)</span>, data<span class="op">=</span><span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>,<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Value</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"City of Ottawa rental vacancy rate"</span>,</span>
<span>       x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="st">"Rental vacancy rate"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"CMHC Rms"</span><span class="op">)</span></span></code></pre></div>
<p><img src="basic_usage_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>By default this fetches the data for the October survey only, in the
past the Rental Market Survey was conducted twice a year. We can pass a
filter option to access the April data and fold that in. We can explore
the possible filter values could be used for this series via the
<code>list_cmhc_filters</code> convenience function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_cmhc_filters.html">list_cmhc_filters</a></span><span class="op">(</span><span class="st">"Rms"</span>,<span class="st">"Vacancy Rate"</span>,<span class="st">"Bedroom Type"</span>,<span class="st">"Historical Time Periods"</span><span class="op">)</span><span class="op">$</span><span class="va">Filters</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$dwelling_type_desc_en</span></span>
<span><span class="co">#&gt; [1] "Row / Apartment" "Row"             "Apartment"      </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$season</span></span>
<span><span class="co">#&gt; [1] "October" "April"</span></span></code></pre></div>
<p>This tells us we could filter by dwelling type, with “Row” or
“Apartment” as possible values, and by season, with “April” or “October”
as possible values. We want the get April values to add to our existing
data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vacancy_data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_cmhc.html">get_cmhc</a></span><span class="op">(</span>survey<span class="op">=</span><span class="st">"Rms"</span>,series<span class="op">=</span><span class="st">"Vacancy Rate"</span>,dimension<span class="op">=</span><span class="st">"Bedroom Type"</span>,</span>
<span>                         breakdown<span class="op">=</span><span class="st">"Historical Time Periods"</span>,  geo_uid<span class="op">=</span><span class="st">"3506008"</span>,filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"season"</span><span class="op">=</span><span class="st">"April"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">vacancy_data</span>,<span class="va">vacancy_data2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Value</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Date</span>,y<span class="op">=</span><span class="va">Value</span><span class="op">/</span><span class="fl">100</span>,colour<span class="op">=</span><span class="va">`Bedroom Type`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>shape<span class="op">=</span><span class="va">Quality</span><span class="op">)</span>, data<span class="op">=</span><span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>,<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Value</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"City of Ottawa rental vacancy rate"</span>,</span>
<span>       x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="st">"Rental vacancy rate"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"CMHC Rms"</span><span class="op">)</span></span></code></pre></div>
<p><img src="basic_usage_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Vacancy Rate shows the number of units that are vacant and not rented
out at the time. A related metric is the Availability Rate, which
measures if a unit is available for rent, including units where a tenant
has given notice but has not moved out yet.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">availability_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"April"</span>,<span class="st">"October"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">season</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/get_cmhc.html">get_cmhc</a></span><span class="op">(</span>survey<span class="op">=</span><span class="st">"Rms"</span>,series<span class="op">=</span><span class="st">"Availability Rate"</span>,dimension<span class="op">=</span><span class="st">"Bedroom Type"</span>,</span>
<span>             breakdown<span class="op">=</span><span class="st">"Historical Time Periods"</span>,  geo_uid<span class="op">=</span><span class="st">"3506008"</span>,filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"season"</span><span class="op">=</span><span class="va">season</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">availability_rate</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Value</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Date</span>,y<span class="op">=</span><span class="va">Value</span><span class="op">/</span><span class="fl">100</span>,colour<span class="op">=</span><span class="va">`Bedroom Type`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>shape<span class="op">=</span><span class="va">Quality</span><span class="op">)</span>, data<span class="op">=</span><span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>,<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Value</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"City of Ottawa rental availability rate"</span>,</span>
<span>       x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="st">"Rental availability rate"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"CMHC Rms"</span><span class="op">)</span></span></code></pre></div>
<p><img src="basic_usage_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>As expected, the availability rate is higher than the vacancy rate,
unfortunately the collection of availability rates was discontinued.
Another related metrics is the turnover rate, but unfortunately this
data is not published in the HMIP.</p>
<p>For data that is collected on a monthly basis, like the Survey of
Starts and Completions (Scss) data, we can specify the frequency and
also get annual or quarterly data. That makes things more efficient if
we are just interested in annual data.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">completions_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_cmhc.html">get_cmhc</a></span><span class="op">(</span>survey<span class="op">=</span><span class="st">"Scss"</span>,series<span class="op">=</span><span class="st">"Completions"</span>,dimension<span class="op">=</span><span class="st">"Dwelling Type"</span>,</span>
<span>                             breakdown<span class="op">=</span><span class="st">"Historical Time Periods"</span>, geo_uid<span class="op">=</span><span class="st">"5915022"</span>,</span>
<span>                             frequency <span class="op">=</span> <span class="st">"Annual"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">completions_data</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Date</span>,y<span class="op">=</span><span class="va">Value</span>,fill<span class="op">=</span><span class="va">`Dwelling Type`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">`Dwelling Type`</span>,scales<span class="op">=</span><span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_fill_discrete</a></span><span class="op">(</span>guide<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"City of Vancouver housing completions"</span>,</span>
<span>       x<span class="op">=</span><span class="cn">NULL</span>, y<span class="op">=</span><span class="st">"Annual completions"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"CMHC Scss"</span><span class="op">)</span></span></code></pre></div>
<p><img src="basic_usage_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>To get snapshot data for sub-geographies, we can select the breakdown
geography type. This can be linked back with census geographies for
plotting.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">under_construction_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_cmhc.html">get_cmhc</a></span><span class="op">(</span>survey<span class="op">=</span><span class="st">"Scss"</span>,series<span class="op">=</span><span class="st">"Under Construction"</span>,dimension<span class="op">=</span><span class="st">"Dwelling Type"</span>,</span>
<span>                                    breakdown<span class="op">=</span><span class="st">"Census Tracts"</span>, geo_uid<span class="op">=</span><span class="st">"5915022"</span>,</span>
<span>                                    year <span class="op">=</span> <span class="fl">2022</span>, month <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="va">geo_data</span> <span class="op">&lt;-</span> <span class="fu">cancensus</span><span class="fu">::</span><span class="fu"><a href="https://mountainmath.github.io/cancensus/reference/get_census.html" class="external-link">get_census</a></span><span class="op">(</span><span class="st">"CA16"</span>,regions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>CSD<span class="op">=</span><span class="st">"5915022"</span><span class="op">)</span>,geo_format <span class="op">=</span> <span class="st">'sf'</span>, level<span class="op">=</span><span class="st">"CT"</span>, quiet<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">geo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">under_construction_data</span> <span class="op">|&gt;</span> </span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">`Dwelling Type`</span><span class="op">==</span><span class="st">"All"</span><span class="op">)</span>,</span>
<span>            by<span class="op">=</span><span class="st">"GeoUID"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">coalesce</a></span><span class="op">(</span><span class="va">Value</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>                   breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>,<span class="fl">0</span>,<span class="fl">10</span>,<span class="fl">50</span>,<span class="fl">100</span>,<span class="fl">500</span>,<span class="fl">1000</span>,<span class="fl">1500</span>,<span class="cn">Inf</span><span class="op">)</span>,</span>
<span>                   labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>,<span class="st">"1 to 10"</span>,<span class="st">"11 to 50"</span>,<span class="st">"51 to 100"</span>,<span class="st">"101 to 500"</span>,</span>
<span>                            <span class="st">"501 to 1000"</span>,<span class="st">"1001 to 1500"</span>,<span class="st">"Over 1500"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>datum<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"City of Vancouver housing units under construction April 2022"</span>,</span>
<span>       fill<span class="op">=</span><span class="st">"Number of units"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"CMCH Scss"</span><span class="op">)</span></span></code></pre></div>
<p><img src="basic_usage_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://mountainmath.ca" class="external-link">Jens von Bergmann</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
